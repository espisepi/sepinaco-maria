<krpano>
<!--  SUPERAMPLIABLES (Acciones para abrirlas) -->
<!--  ABRIR Super Ampliable Virgen  -->
<action name="amplimari"> if(webvr.isenabled AND device.mobile == true, set(hotspot[imposible].visible, true); , playsound (ding, url=%BASEDIR%/data/audio/ding.mp3, false, 0.3); set(layer[skin_btn_eye].visible, false); looktohotspot(maria, 60, smooth, true); delayedcall(0.3, loadpano(data/supers/maria/pano.xml, null, KEEPSCENES, ZOOMBLEND(1.0, 5.0, easeInOutSine))); ); delayedcall (0.3, lookat(0,0); ); </action>
<!--  ABRIR Super Ampliable Santa Ana  -->
<action name="amplisantana"> if(webvr.isenabled AND device.mobile == true, set(hotspot[imposible].visible, true); , playsound (ding, url=%BASEDIR%/data/audio/ding.mp3, false, 0.3); set(layer[skin_btn_eye].visible, false); looktohotspot(santana, 60, smooth, true); delayedcall(0.3, loadpano(data/supers/santana/pano.xml, null, KEEPSCENES, ZOOMBLEND(1.0, 5.0, easeInOutSine))); ); delayedcall (0.3, lookat(0,0); ); </action>
<!--  ABRIR Super Ampliable San Joaquín  -->
<action name="amplisanjo"> if(webvr.isenabled AND device.mobile == true, set(hotspot[imposible].visible, true); , playsound (ding, url=%BASEDIR%/data/audio/ding.mp3, false, 0.3); set(layer[skin_btn_eye].visible, false); looktohotspot(sanjo, 60, smooth, true); delayedcall(0.3, loadpano(data/supers/sanjo/pano.xml, null, KEEPSCENES, ZOOMBLEND(1.0, 5.0, easeInOutSine))); ); delayedcall (0.3, lookat(0,0); ); </action>
<!--  ABRIR Super Retablo Completo  -->
<action name="ampliretab"> if(webvr.isenabled AND device.mobile == true, set(hotspot[imposible].visible, true); , playsound (ding, url=%BASEDIR%/data/audio/ding.mp3, false, 0.3); set(layer[skin_btn_eye].visible, false); looktohotspot(retablo, 100, smooth, true); delayedcall(0.3, loadpano(data/supers/retablo/pano.xml, null, KEEPSCENES, ZOOMBLEND(1.0, 5.0, easeInOutSine))); ); delayedcall (0.3, lookat(0,0); ); </action>
<!--  CIERRES Y VUELTA a la pano principal  -->
<action name="tipocierres"> if (webvr.isenabled == true, set(hotspot[close].visible, false);, set(hotspot[close].visible, true); ); if (webvr.isenabled == true, set(hotspot[closevr].visible, true);, set(hotspot[closevr].visible, false); ); </action>
<action name="closepano"> set(layer[skin_btn_eye].visible, true); loadscene(scene_panorama, NULL, MERGE, COLORBLEND(2.0, 0x000000, easeOutSine)); </action>
<!--  Centrar Vista (Flat panos)  -->
<action name="centrarvista"> set(view.vlookat, 0.1); set(view.hlookat, 0.1); </action>
<!--  ACCIONES DE CONTENIDO (Gestión y acciones cosméticas) -->
<!--  desactiva todos los botones si video intro está visible  -->
<action name="desactiva"> if(hotspot[vid_intro].visible == true, set(hotspot[hs_playretab], enabled=false, alpha=0.5); set(hotspot[hs_playmural], enabled=false, alpha=0.5); set(hotspot[hs_playzocal], enabled=false, alpha=0.5); set(hotspot[hs_playescul], enabled=false, alpha=0.5); set(hotspot[hs_playlienzos], enabled=false, alpha=0.5); set(hotspot[hs_lupamari], enabled=false, alpha=0.5); set(hotspot[hs_lupasantana], enabled=false, alpha=0.5); set(hotspot[hs_lupasanjo], enabled=false, alpha=0.5); set(hotspot[hs_luparet], enabled=false, alpha=0.5); , activa(); ); </action>
<action name="activa"> set(hotspot[hs_playretab], enabled=true, alpha=1); set(hotspot[hs_playmural], enabled=true, alpha=1); set(hotspot[hs_playzocal], enabled=true, alpha=1); set(hotspot[hs_playescul], enabled=true, alpha=1); set(hotspot[hs_playlienzos], enabled=true, alpha=1); set(hotspot[hs_lupamari], enabled=true, alpha=1); set(hotspot[hs_lupasantana], enabled=true, alpha=1); set(hotspot[hs_lupasanjo], enabled=true, alpha=1); set(hotspot[hs_luparet], enabled=true, alpha=1); </action>
<!--  VIDEO "RETABLO" (Check, aparición y desaparición)  -->
<action name="togglevid_retablo"> if(hotspot[vid_retablo].visible == true, closevid_retablo(); , openvid_retablo(); ); </action>
<action name="openvid_retablo"> closevid_escul(); closevid_murales(); closevid_zocal(); closevid_lienzos(); closevid_intro(); playsound (ding, url=%BASEDIR%/data/audio/ding.mp3, false, 0.3); set (hotspot[hs_flare], ath=-31.933261318946734 ,atv=-1.0286885699508428, scale=0.03, visible=true); callwith(hotspot[hs_flare], tween(ath|atv|scale, -44.2864735|40.4792789|0.175, 0.6, easeoutback, set (hotspot[hs_flare].visible, false); );); set (hotspot[vid_retablo].visible, true); callwith(hotspot[vid_retablo], play(vid_retablo); ); </action>
<action name="closevid_retablo"> if (hotspot[vid_retablo].visible == true, playsound (woosh, url=%BASEDIR%/data/audio/woosh.mp3, false, 0.7); callwith(hotspot[vid_retablo], tween(alpha, 0.0, 0.3, easeoutquart, stop(vid_retablo);); ); delayedcall (0.4, set (hotspot[vid_retablo], visible=false, alpha=1););); </action>
<!--  VIDEO "MURALES" (Check, aparición y desaparición)  -->
<action name="togglevid_murales"> if(hotspot[vid_murales].visible == true, closevid_murales(); , openvid_murales(); ); </action>
<action name="openvid_murales"> closevid_escul(); closevid_retablo(); closevid_zocal(); closevid_lienzos(); closevid_intro(); playsound (ding, url=%BASEDIR%/data/audio/ding.mp3, false, 0.3); set (hotspot[hs_flare], ath=82.94728837191599 ,atv=14.522479649813853, scale=0.03, visible=true); callwith(hotspot[hs_flare], tween(ath|atv|scale, 42.0922094537799|37.30303093348032|0.175, 0.6, easeoutback, set (hotspot[hs_flare].visible, false); );); set (hotspot[vid_murales].visible, true); callwith(hotspot[vid_murales], play(vid_murales); ); </action>
<action name="closevid_murales"> if (hotspot[vid_murales].visible == true, playsound (woosh, url=%BASEDIR%/data/audio/woosh.mp3, false, 0.7); callwith(hotspot[vid_murales], tween(alpha, 0.0, 0.3, easeoutquart, stop(vid_murales);); ); delayedcall (0.4, set (hotspot[vid_murales], visible=false, alpha=1););); </action>
<!--  VIDEO "ESCULTURAS y PINTURAS" del retablo (Check, aparición y desaparición)  -->
<action name="togglevid_escul"> if(hotspot[vid_escul].visible == true, closevid_escul(); , openvid_escul(); ); </action>
<action name="openvid_escul"> closevid_murales(); closevid_retablo(); closevid_zocal(); closevid_lienzos(); closevid_intro(); playsound (ding, url=%BASEDIR%/data/audio/ding.mp3, false, 0.3); set (hotspot[hs_flare], ath=-0.4816816517584357 ,atv=-3.581599990160532, scale=0.03, visible=true); callwith(hotspot[hs_flare], tween(ath|atv|scale, 42.0922094537799|37.30303093348032|0.175, 0.6, easeoutback, set (hotspot[hs_flare].visible, false); );); set (hotspot[vid_escul].visible, true); callwith(hotspot[vid_escul], play(vid_escul); ); </action>
<action name="closevid_escul"> if (hotspot[vid_escul].visible == true, playsound (woosh, url=%BASEDIR%/data/audio/woosh.mp3, false, 0.7); callwith(hotspot[vid_escul], tween(alpha, 0.0, 0.3, easeoutquart, stop(vid_escul);); ); delayedcall (0.4, set (hotspot[vid_escul], visible=false, alpha=1););); </action>
<!--  VIDEO "SUELO y ZÓCALO" (Check, aparición y desaparición)  -->
<action name="togglevid_zocal"> if(hotspot[vid_zocal].visible == true, closevid_zocal(); , openvid_zocal(); ); </action>
<action name="openvid_zocal"> closevid_murales(); closevid_retablo(); closevid_escul(); closevid_lienzos(); closevid_intro(); playsound (ding, url=%BASEDIR%/data/audio/ding.mp3, false, 0.3); set (hotspot[hs_flare], ath=-178.38174949200837 ,atv=28.618405652954113, scale=0.03, visible=true); callwith(hotspot[hs_flare], tween(ath|atv|scale, -159.89696429439093|33.78333011083925|0.175, 0.6, easeoutback, set (hotspot[hs_flare].visible, false); );); set (hotspot[vid_zocal].visible, true); callwith(hotspot[vid_zocal], play(vid_zocal); ); </action>
<action name="closevid_zocal"> if (hotspot[vid_zocal].visible == true, playsound (woosh, url=%BASEDIR%/data/audio/woosh.mp3, false, 0.7); callwith(hotspot[vid_zcalo], tween(alpha, 0.0, 0.3, easeoutquart, stop(vid_zocal);); ); delayedcall (0.4, set (hotspot[vid_zocal], visible=false, alpha=1););); </action>
<!--  VIDEO "LIENZOS" (Check, aparición y desaparición)  -->
<action name="togglevid_lienzos"> if(hotspot[vid_lienzos].visible == true, closevid_lienzos(); , openvid_lienzos(); ); </action>
<action name="openvid_lienzos"> closevid_murales(); closevid_retablo(); closevid_escul(); closevid_zocal(); closevid_intro(); playsound (ding, url=%BASEDIR%/data/audio/ding.mp3, false, 0.3); set (hotspot[hs_flare], ath=131.5263917303605 ,atv=-20.30926636886805, scale=0.03, visible=true); callwith(hotspot[hs_flare], tween(ath|atv|scale, 111.20883871116308|40.71119069167542|0.175, 0.6, easeoutback, set (hotspot[hs_flare].visible, false); );); set (hotspot[vid_lienzos].visible, true); callwith(hotspot[vid_lienzos], play(vid_lienzos); ); </action>
<action name="closevid_lienzos"> if (hotspot[vid_lienzos].visible == true, playsound (woosh, url=%BASEDIR%/data/audio/woosh.mp3, false, 0.7); callwith(hotspot[vid_lienzos], tween(alpha, 0.0, 0.3, easeoutquart, stop(vid_lienzos);); ); delayedcall (0.4, set (hotspot[vid_lienzos], visible=false, alpha=1););); </action>
<!--  VIDEO "INTRO" (Check, aparición y desaparición)  -->
<action name="togglevid_intro"> if(hotspot[vid_intro].visible == true, closevid_intro(); , openvid_intro(); ); </action>
<action name="openvid_intro"> moveto(-3.19,22.89,linear(10);); closevid_murales(); closevid_retablo(); closevid_escul(); closevid_zocal(); closevid_lienzos(); playsound (ding, url=%BASEDIR%/data/audio/ding.mp3, false, 0.3); set (hotspot[vid_intro].visible, true); desactiva(); callwith(hotspot[vid_intro], play(vid_intro); ); </action>
<action name="closevid_intro"> if (hotspot[vid_intro].visible == true, playsound (woosh, url=%BASEDIR%/data/audio/woosh.mp3, false, 0.7); callwith(hotspot[vid_intro], tween(alpha, 0.0, 0.3, easeoutquart, stop(vid_intro);); ); delayedcall (0.4, set (hotspot[vid_intro], visible=false, alpha=1););); activa(); </action>
<!--  ACCIONES GLOBALES  -->
<!--  COMENZAR  (Esconder el saludo inicial y dar comienzo a la visita virtual)  -->
<action name="esconder_saludo"> set(comienzo, false); set(hotspot[hs_titul].visible, false); set(hotspot[hs_titul2].visible, false); autorotate.stop(); set(layer[skin_btn_eye].visible, true); exponerhs(); looktohotspot(retablo, 125.66, smooth, true); </action>
<!--  ALTERNAR INTERACCIONES VISIBLES/INVISIBLES en la panorámica -->
<action name="togglevista"> if (ver_hotspot == true, esconderhs();, exponerhs(); ); </action>
<action name="exponerhs"> set(ver_hotspot, true); set(hotspot[hs_lupamari], visible=true, ath=0.633975679583159, atv=5.842730328587785); set(hotspot[hs_lupasantana], visible=true, ath=-14.18758264042026, atv=8.055426815906594); set(hotspot[hs_lupasanjo], visible=true, ath=15.997820184585521, atv=8.215282450273754); set(hotspot[hs_luparet], visible=true, ath=-0.672961057705038, atv=-16.214251015165022); set(hotspot[hs_playlienzos], visible=true, ath=131.52639019234144, atv=-20.309265984339845); set(hotspot[hs_playmural], visible=true, ath=82.94728837191599, atv=14.522479649813853); set(hotspot[hs_playzocal], visible=true, ath=-178.38174949200837, atv=28.618405652954113); set(hotspot[hs_playretab], visible=true, ath=-31.933261318946734, atv=-1.0286885699508428); set(hotspot[hs_playescul], visible=true, ath=-0.4816816517584357, atv=-3.581599990160532); </action>
<action name="esconderhs"> set(ver_hotspot, false); set(hotspot[hs_lupamari].visible, false); set(hotspot[hs_lupasantana].visible, false); set(hotspot[hs_lupasanjo].visible, false); set(hotspot[hs_luparet].visible, false); set(hotspot[hs_playlienzos].visible, false); set(hotspot[hs_playmural].visible, false); set(hotspot[hs_playzocal].visible, false); set(hotspot[hs_playretab].visible, false); set(hotspot[hs_playescul].visible, false); </action>
<!--  EXPERIMENTALES  -->
<action name="shock"> add(stupidcounter, 1); if (stupidcounter == 5, playsound(ouch, %BASEDIR%/data/audio/13.mp3); delayedcall (2.3, set(hotspot[blackground].visible, true); set(hotspot[aviso].visible, true); set(stupidcounter, 0); ); ); </action>
</krpano>